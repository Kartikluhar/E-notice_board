{% extends 'base.html' %}
{% comment %} admin_list_student.html {% endcomment %}

{% block title %}
  Student List | E-Notice Board
{% endblock %}

{% block content %}

<style>
  
</style>

<section class="py-4">
  <div class="container">

    <!-- Page Header -->
   <div class="text-center mb-4 page-header">
  <h2 class="d-flex justify-content-center align-items-center gap-2">
    <i class="bi bi-people-fill"></i> Student List
    <span class="badge bg-primary rounded-pill">
      {{ total_students }}
    </span>
  </h2>
  <p class="text-muted">
    Manage all registered students here
  </p>
</div>


    <!-- Top Buttons -->
    <div class="d-flex flex-wrap justify-content-center gap-3 mb-4">
      <a href="{% url 'add_student' %}"
        class="btn btn-primary btn-custom text-white">
        <i class="bi bi-person-plus"></i> Add New Student
      </a>
    </div>

    <!-- Filter Card -->
    <div class="card filter-card mb-4">
      <div class="card-body">

        <form method="get" class="row g-3">

          <!-- Search -->
          <div class="col-md-4">
            <input type="text" name="search"
              class="form-control"
              placeholder="ðŸ” Search name, email, enrollment"
              value="{{ request.GET.search }}">
          </div>

          <!-- Department -->
          <div class="col-md-3">
            <select name="department" class="form-select">
              <option value="">All Departments</option>
              {% for dept in departments %}
                <option value="{{ dept.id }}"
                  {% if request.GET.department == dept.id|stringformat:"s" %}selected{% endif %}>
                  {{ dept.d_name }}
                </option>
              {% endfor %}
            </select>
          </div>

          <!-- Semester -->
          <div class="col-md-2">
            <select name="sem" class="form-select">
              <option value="">All Sem</option>
              {% for i in "12345678" %}
                <option value="{{ i }}"
                  {% if request.GET.sem == i %}selected{% endif %}>
                  Sem {{ i }}
                </option>
              {% endfor %}
            </select>
          </div>

          <!-- Buttons -->
          <div class="col-md-3 d-flex gap-2">
            <button type="submit"
              class="btn btn-primary btn-custom w-100">
              <i class="bi bi-funnel"></i> Filter
            </button>
            <a href="{% url 'student_list' %}"
              class="btn btn-outline-secondary btn-custom w-100">
              <i class="bi bi-arrow-clockwise"></i> Reset
            </a>
          </div>

        </form>

      </div>
    </div>

    <!-- Table Card -->
    <div class="card table-card">

      <div class="card-header card-header-custom d-flex justify-content-between align-items-center">
        <h5 class="mb-0">
          <i class="bi bi-table"></i> All Students
        </h5>

        <a href="{% url 'add_student' %}"
          class="btn btn-light btn-sm btn-custom">
          <i class="bi bi-plus-circle"></i> Add Student
        </a>
      </div>

<div class="table-responsive p-3 common-table-wrapper">
        <table class="table align-middle mb-0">

          <thead>
            <tr>
              <th>Enrollment</th>
              <th>Email</th>
              <th>Name</th>
              <th>Department</th>
              <th>Sem</th>
              <th>Role</th>
              <th class="text-center">Actions</th>
            </tr>
          </thead>

          <tbody>
            {% for student in students %}
            <tr>
              <td>{{ student.enrollment_no }}</td>
              <td>{{ student.email }}</td>
              <td>{{ student.full_name }}</td>
              <td>{{ student.department.d_name }}</td>
              <td><span class="badge bg-info text-dark">Sem {{ student.sem }}</span></td>
              <td><span class="badge bg-secondary">{{ student.role }}</span></td>

              <td class="text-center">
                <div class="d-flex justify-content-center gap-2 flex-wrap">
                <a href="{% url 'update_student' student.id %}"
                  class="btn btn-sm btn-outline-primary btn-custom me-2">
                  <i class="bi bi-pencil"></i>
                </a>

                <a href="{% url 'delete_student' student.id %}"
                  class="btn btn-sm btn-outline-danger btn-custom">
                  <i class="bi bi-trash"></i>
                </a>
                </div>
              </td>
            </tr>
            {% empty %}
            <tr>
              <td colspan="7" class="text-center py-4 text-muted">
                <i class="bi bi-info-circle"></i> No students available.
              </td>
            </tr>
            {% endfor %}
          </tbody>

        </table>
      </div>

    </div>

  </div>
</section>

{% endblock %}
